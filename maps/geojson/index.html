Select all
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>Point in Polygon</title>
  
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
  <script src='http://api.tiles.mapbox.com/mapbox.js/v1.5.0/mapbox.js'></script>
  <script src='http://codeorigin.jquery.com/jquery-1.10.2.min.js'></script>
  <link href='http://api.tiles.mapbox.com/mapbox.js/v1.5.0/mapbox.css' rel='stylesheet' />
  
  <style>
    body { margin:0; padding:0; }
    #map { position:absolute; top:0; bottom:0; width:100%; }
  </style>
</head>
<body>
<style>
#state {
    position:absolute;
    top:10px;
    right:10px;
    background:#fff;
    font-size:30px;
    padding:10px;
    z-index:999;
}
</style>

<!--
  This example requires leaflet-pip, which you can get on GitHub:
  https://github.com/tmcw/leaflet-pip
  and jQuery to load the file with AJAX. You can use another tool for AJAX.

  This pulls the file airports.csv, converts into into GeoJSON by autodetecting
  the latitude and longitude columns, and adds it to the map.

  Another CSV that you use will also need to contain latitude and longitude
  columns, and they must be similarly named.
-->

<script src='leaflet-pip.js'></script>
<div id='map'></div>
<div id='state'></div>
<script>
var map = L.mapbox.map('map', 'examples.map-9ijuk24y')
    .setView([19.335286999585545,-99.17621288448572], 15);

$.ajax({
    url: '/appra/index.php/api/19.335286999585545,-99.17621288448572/19.348596275044994,-99.16640035808086/tianguis,schools,density',
    dataType: 'json',
    success: function load(d) {		
		var density = d.density;
        var heatmap = L.geoJson(density, {
			style : { 
				"opacity" : 0.9,
				"color"   : function(feature) {
					densidad = feature.properties.densidad;
					if(densidad > -1    && densidad < 1000)  return "#ffebd6";
					if(densidad > 999   && densidad < 2000)  return "#f5cbae";
					if(densidad > 1999  && densidad < 5000)  return "#eba988";
					if(densidad > 4999  && densidad < 10000) return "#e08465";
					if(densidad > 9999  && densidad < 20000) return "#d65d45";
					if(densidad > 19999 && densidad < 30000) return "#cc3527";
					if(densidad > 29999) return "#c40a0a";
				}
			}
		}).addTo(map);
		
		/*
		line-color:#594;
		line-width:0.5;
		polygon-opacity:0.9;

		[densidad > -1] [densidad < 1000] { polygon-fill:#ffebd6; }
		[densidad > 999] [densidad < 2000] { polygon-fill:#f5cbae; }
		[densidad > 1999] [densidad < 5000] { polygon-fill:#eba988; }
		[densidad > 4999] [densidad < 10000] { polygon-fill:#e08465; }
		[densidad > 9999] [densidad < 20000] { polygon-fill:#d65d45; }
		[densidad > 19999] [densidad < 30000] { polygon-fill:#cc3527; }
		[densidad > 29999] { polygon-fill:#c40a0a; }
		*/
       /*
        L.marker([38, -102], {
            icon: L.mapbox.marker.icon({
                'marker-color': '#f22'
            }),
            draggable: true
        }).addTo(map)
        .on('dragend', function(e) {
            var layer = leafletPip.pointInLayer(this.getLatLng(), states, true);
            document.getElementById('state').innerHTML = layer.length ?
                layer[0].feature.properties.name : '';
        });
        */
    }
});
</script>
</body>
